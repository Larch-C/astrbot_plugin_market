# 插件市场插件说明文档

## 1. 插件基本信息
- **插件名称**：AstrBot 插件市场
- **插件标识**：astrbot_plugin_market
- **作者**：长安某
- **功能描述**：提供插件市场浏览、搜索、排行和一键安装功能，支持智能代理下载和安装后自动发送插件说明。

## 2. 核心功能列表
### 2.1 插件市场浏览
- 分页展示官方插件市场中的所有插件（默认10个/页）。
- 显示插件名称、作者、功能描述、Star数及更新时间。
- 支持页码切换，如查看第2页：`/插件市场 2`。

### 2.2 关键词搜索
- 支持按插件名称、作者、描述进行模糊搜索。
- 搜索结果分页展示，如：`/插件搜索 天气 2`（搜索"天气"并查看第2页）。

### 2.3 插件排行
- 新增功能，可按 **Star数量** 或 **更新时间** 对插件进行排序。
- 支持页码切换，如：`/插件排行 time 2`。

### 2.4 插件安装与加载
- 管理员专属指令：`/安装插件 [编号/名称/URL]`。
- **智能下载**：优先下载仓库的最新发行版(Release)，失败则回退到主分支。支持自动测试并使用最快的代理进行下载。
- **自动加载**：安装后自动触发插件加载，无需手动重载。
- **自动文档**：安装成功后，自动将插件的 `README.md` 渲染成图片发送。

## 3. 指令使用说明
### 3.1 浏览插件市场
- **指令格式**：`/插件市场 [页码]`
- **示例**：
    - `/插件市场`  # 查看第 1 页
    - `/插件市场 3` # 查看第 3 页

### 3.2 搜索插件
- **指令格式**：`/插件搜索 <关键词> [页码]`
- **示例**：`/插件搜索 天气`

### 3.3 查看插件排行
- **指令格式**：`/插件排行 [排序方式] [页码]`
- **说明**：`排序方式` 可选 `star` (默认) 或 `time`。
- **示例**：`/插件排行 time`

### 3.4 安装插件
- **指令格式**：`/安装插件 [标识]`
- **说明**：`标识` 可以是插件编号、插件名或Github仓库链接。
- **示例**：
    - `/插件安装 1`
    - `/插件安装 https://github.com/user/repo.git`

## 注意事项
### 权限限制
- 安装插件仅管理员可执行。
- 所有指令均需@机器人或使用正确的前缀触发。

## 更新
- **v1.3.1**
      - 增强了图片渲染API的容错性，增加图片验证。
- **v1.3.0**
    - 新增 **智能下载**，自动测试并选择最优代理，优先下载稳定版(Release)。
    - 新增 **自动文档**，安装插件后自动发送其 `README.md` 图片。
    - 增强了插件API和图片渲染API的容错性，支持多地址自动切换。
- **v1.1.0**
    - 使用HTML渲染生成图片，美化界面。
    - 新增 `/插件排行` 指令。
    - 支持通过GitHub链接直接安装插件。
    - 修复了因排序不一致导致的插件安装错误问题。
- **v1.0.0**
    - 实现插件市场浏览、搜索、安装等基础功能。```
